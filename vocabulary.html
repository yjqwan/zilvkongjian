<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>叶姥姥背单词</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3B82F6',
                        secondary: '#10B981',
                        accent: '#F59E0B',
                        dark: '#1F2937',
                        light: '#F3F4F6'
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .card-shadow {
                box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.05), 0 8px 10px -6px rgba(0, 0, 0, 0.02);
            }
            .nav-shadow {
                box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.05);
            }
            .card-flip {
                perspective: 1000px;
                transform-style: preserve-3d;
                transition: transform 0.6s;
            }
            .card-flip.flipped {
                transform: rotateY(180deg);
            }
            .card-front, .card-back {
                position: absolute;
                width: 100%;
                height: 100%;
                backface-visibility: hidden;
            }
            .card-back {
                transform: rotateY(180deg);
            }
        }
    </style>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Comic Sans MS', 'Marker Felt', '幼圆', 'Arial Rounded MT Bold', sans-serif;
        }

        :root {
            --primary: #FF9ED8;
            --secondary: #A5D8FF;
            --accent: #FFD166;
            --light: #FFEDF7;
            --dark: #5E548E;
            --success: #8AC926;
            --warning: #FF9F1C;
            --error: #FF6B6B;
        }

        body {
            background: linear-gradient(135deg, var(--light), var(--secondary));
            min-height: 100vh;
            padding: 15px;
            color: var(--dark);
            overflow-x: hidden;
            position: relative;
            padding-bottom: 30px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            padding: 15px;
            margin-bottom: 20px;
            position: relative;
        }

        .logo {
            font-size: clamp(2rem, 6vw, 3.5rem);
            font-weight: bold;
            color: var(--dark);
            text-shadow: 3px 3px 0 var(--accent);
            margin-bottom: 8px;
            letter-spacing: 2px;
            white-space: nowrap;
        }

        .subtitle {
            font-size: clamp(0.9rem, 3vw, 1.2rem);
            color: var(--dark);
            margin-bottom: 15px;
            white-space: nowrap;
        }

        .nav-buttons {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .btn {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 8px 14px;
            border-radius: 50px;
            font-size: clamp(0.9rem, 3vw, 1.1rem);
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            gap: 5px;
            white-space: nowrap;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
            background-color: #ff87cf;
        }

        .btn-secondary {
            background-color: var(--secondary);
        }

        .btn-secondary:hover {
            background-color: #8dc9ff;
        }

        .btn-accent {
            background-color: var(--accent);
            color: var(--dark);
        }

        .btn-accent:hover {
            background-color: #ffc44d;
        }

        .btn-small {
            padding: 7px 12px;
            font-size: 0.9rem;
        }

        .content-section {
            background: rgba(255, 255, 255, 0.92);
            border-radius: 25px;
            padding: 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            margin-bottom: 25px;
            display: none;
            min-height: 500px;
        }

        .active-section {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h2 {
            color: var(--dark);
            margin-bottom: 20px;
            font-size: clamp(1.5rem, 5vw, 2rem);
            text-align: center;
        }

        h3 {
            font-size: clamp(1.2rem, 4vw, 1.5rem);
        }

        .wordbook-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .wordbook-card {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 20px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
            min-height: 130px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .wordbook-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .wordbook-card h3 {
            margin-bottom: 10px;
            color: white;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .wordbook-card p {
            color: rgba(255, 255, 255, 0.9);
            font-size: 0.85rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .word-count {
            position: absolute;
            top: 10px;
            right: 10px;
            background: white;
            color: var(--primary);
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            font-size: 0.9rem;
        }

        /* 学习页面样式 */
        .learning-container {
            max-width: 800px;
            margin: 0 auto;
            position: relative;
        }

        .learning-header {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 20px;
            padding: 0 5px;
        }

        .mode-selector {
            display: flex;
            gap: 8px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .mode-btn {
            background: var(--light);
            border: 2px solid var(--primary);
            padding: 7px 14px;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            color: var(--dark);
            font-size: 0.95rem;
        }

        .mode-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .mode-btn:hover:not(.active) {
            background: rgba(255, 158, 216, 0.3);
        }

        .progress-container {
            background: white;
            border-radius: 20px;
            padding: 15px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
            margin-bottom: 25px;
            position: relative;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 5px;
        }

        .restart-btn {
            background: var(--light);
            color: var(--dark);
            border: 2px solid var(--secondary);
            border-radius: 20px;
            padding: 3px 10px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .restart-btn:hover {
            background: var(--secondary);
            color: white;
        }

        .progress-bar {
            height: 18px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--secondary), var(--primary));
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        .progress-message {
            text-align: center;
            margin-top: 15px;
            font-size: 1.1rem;
            color: var(--primary);
            font-weight: bold;
        }

        .question-card {
            background: white;
            border-radius: 25px;
            padding: 25px 15px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-bottom: 25px;
            position: relative;
            min-height: 280px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .word {
            font-size: clamp(2rem, 8vw, 3.5rem);
            color: var(--dark);
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            word-break: break-word;
            max-width: 100%;
        }

        .meaning {
            font-size: clamp(1.5rem, 6vw, 2rem);
            color: var(--primary);
            margin-bottom: 20px;
            max-width: 100%;
        }

        .part-of-speech {
            display: inline-block;
            background: var(--accent);
            color: var(--dark);
            padding: 5px 12px;
            border-radius: 20px;
            font-size: clamp(0.9rem, 3vw, 1.1rem);
            margin-bottom: 20px;
            white-space: nowrap;
        }

        .input-container {
            margin: 20px 0;
            width: 100%;
            max-width: 500px;
            position: relative;
        }

        .word-input {
            width: 100%;
            padding: 12px 18px;
            border: 3px solid var(--primary);
            border-radius: 50px;
            font-size: clamp(1rem, 4vw, 1.2rem);
            outline: none;
            text-align: center;
        }

        .word-input:focus {
            border-color: var(--secondary);
            box-shadow: 0 0 10px rgba(165, 216, 255, 0.5);
        }

        .error-message {
            color: var(--error);
            margin-top: 10px;
            min-height: 25px;
            font-size: clamp(0.9rem, 3vw, 1rem);
            text-align: center;
        }

        .options-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 10px;
            margin-top: 20px;
            width: 100%;
        }

        .option-btn {
            background: white;
            border: 3px solid var(--secondary);
            border-radius: 20px;
            padding: 12px 8px;
            font-size: clamp(0.95rem, 3vw, 1.1rem);
            cursor: pointer;
            transition: all 0.2s ease;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .option-btn:hover {
            background: var(--light);
            transform: translateY(-3px);
        }

        .option-btn.correct {
            background: var(--success);
            color: white;
            border-color: var(--success);
        }

        .option-btn.incorrect {
            background: var(--error);
            color: white;
            border-color: var(--error);
        }

        .feedback {
            margin-top: 15px;
            font-size: clamp(1.2rem, 4vw, 1.5rem);
            min-height: 40px;
            text-align: center;
        }

        .correct-feedback {
            color: var(--success);
        }

        .incorrect-feedback {
            color: var(--error);
        }

        /* 单词库样式 */
        .word-library {
            max-height: 400px;
            overflow-y: auto;
            padding: 10px;
            margin-top: 20px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 15px;
        }

        .word-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 12px;
            border-bottom: 1px solid #eee;
            align-items: center;
            font-size: clamp(0.9rem, 3vw, 1rem);
        }

        .word-item:last-child {
            border-bottom: none;
        }

        .word-text {
            font-weight: bold;
            min-width: 100px;
        }

        .word-meaning {
            color: var(--primary);
            text-align: right;
            min-width: 120px;
        }

        .import-section {
            background: rgba(255, 255, 255, 0.7);
            padding: 20px;
            border-radius: 15px;
            margin-top: 25px;
        }

        textarea {
            width: 100%;
            height: 150px;
            padding: 15px;
            border: 3px solid var(--secondary);
            border-radius: 20px;
            margin: 15px 0;
            font-size: 1rem;
            resize: vertical;
        }

        .example {
            background: var(--light);
            padding: 12px;
            border-radius: 15px;
            margin-top: 15px;
            font-size: 0.85rem;
        }

        /* 蛋仔角色 */
        .egg-character {
            position: absolute;
            z-index: -1;
            opacity: 0.15;
            pointer-events: none;
        }

        .egg-1 {
            top: 50px;
            left: 5%;
            width: clamp(100px, 20vw, 150px);
            height: clamp(120px, 24vw, 180px);
            background: var(--primary);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
        }

        .egg-2 {
            bottom: 100px;
            right: 5%;
            width: clamp(80px, 16vw, 120px);
            height: clamp(95px, 19vw, 140px);
            background: var(--accent);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
        }

        /* 翻页动画 */
        @keyframes flipIn {
            0% { transform: rotateY(90deg); opacity: 0; }
            100% { transform: rotateY(0); opacity: 1; }
        }

        @keyframes flipOut {
            0% { transform: rotateY(0); opacity: 1; }
            100% { transform: rotateY(90deg); opacity: 0; }
        }

        .flip-in {
            animation: flipIn 0.5s ease forwards;
        }

        .flip-out {
            animation: flipOut 0.5s ease forwards;
        }

        /* 创建单词本弹窗 */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            overflow-y: auto;
        }

        .modal-content {
            background: white;
            border-radius: 25px;
            padding: 25px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
            position: relative;
            margin: 20px 0;
        }

        .close-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--dark);
        }

        .modal-title {
            text-align: center;
            margin-bottom: 15px;
            color: var(--dark);
            font-size: 1.5rem;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: bold;
            color: var(--dark);
            font-size: 0.95rem;
        }

        .form-control {
            width: 100%;
            padding: 10px 12px;
            border: 3px solid var(--secondary);
            border-radius: 15px;
            font-size: 1rem;
        }

        /* 操作按钮容器 */
        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        /* 响应式调整 */
        @media (max-width: 480px) {
            .nav-buttons {
                gap: 6px;
            }
            
            .btn {
                padding: 7px 10px;
                font-size: 0.85rem;
            }
            
            .wordbook-container {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
            
            .options-container {
                grid-template-columns: 1fr;
            }
            
            .question-card {
                padding: 20px 10px;
                min-height: 250px;
            }
            
            .word {
                font-size: clamp(1.8rem, 7vw, 3rem);
            }
            
            .meaning {
                font-size: clamp(1.3rem, 5vw, 1.8rem);
            }
        }
        
        /* 键盘弹出时调整 */
        @media (max-height: 600px) {
            .input-container {
                margin-top: 40px;
            }
        }
        
        /* 自制单词本卡片 */
        .custom-book {
            background: linear-gradient(135deg, #FF9ED8, #FFD166);
        }
        
        .mobile-keyboard-adjust {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 50px;
            background: transparent;
            pointer-events: none;
            z-index: 10;
        }
        
        /* 消息通知样式 */
        .notification-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--accent);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: var(--dark);
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            z-index: 100;
        }
        
        .notification-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }
        
        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--error);
            color: white;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .notifications-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-top: 20px;
        }
        
        .notification-card {
            background: var(--light);
            border-radius: 15px;
            padding: 15px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
            border-left: 5px solid var(--primary);
        }
        
        .notification-title {
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--dark);
        }
        
        .notification-message {
            font-size: 0.9rem;
            color: #555;
        }
        
        .notification-time {
            font-size: 0.8rem;
            color: #888;
            margin-top: 8px;
            text-align: right;
        }
        
        /* 搜索框样式 */
        .search-container {
            margin-bottom: 20px;
        }
        
        .search-input {
            width: 100%;
            padding: 12px 20px;
            border: 3px solid var(--secondary);
            border-radius: 50px;
            font-size: 1rem;
            outline: none;
            transition: all 0.3s ease;
        }
        
        .search-input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 10px rgba(255, 158, 216, 0.3);
        }
        
        /* 搜索高亮样式 */
        .highlight {
            color: var(--warning);
            font-weight: bold;
        }
        
        /* 单词本操作按钮 - 明显可见的横向三个点 */
        .book-options {
            position: absolute;
            top: 10px;
            left: 10px;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            z-index: 10;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 50%;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        /* 单词编辑列表样式 */
        .word-edit-list {
            max-height: 300px;
            overflow-y: auto;
            margin: 15px 0;
            border: 1px solid #eee;
            border-radius: 15px;
        }
        
        .word-edit-item {
            display: grid;
            grid-template-columns: 1fr 80px 1fr 50px;
            gap: 10px;
            padding: 10px;
            border-bottom: 1px solid #eee;
            align-items: center;
        }
        
        .word-edit-item:last-child {
            border-bottom: none;
        }
        
        .delete-word-btn {
            color: var(--error);
            cursor: pointer;
            text-align: center;
            font-size: 1.2rem;
        }
        
        .add-word-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin: 15px 0;
        }
        
        /* 操作成功提示 */
        .toast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--success);
            color: white;
            padding: 10px 20px;
            border-radius: 50px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .toast.show {
            opacity: 1;
        }
        
        /* 确认弹窗样式 */
        .confirm-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }
        
        .confirm-content {
            background: white;
            border-radius: 20px;
            padding: 25px;
            width: 90%;
            max-width: 400px;
            text-align: center;
        }
        
        .confirm-title {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: var(--dark);
        }
        
        .confirm-message {
            margin-bottom: 25px;
            color: #555;
            line-height: 1.5;
        }
        
        /* 单词本操作弹窗 */
        .book-action-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }
        
        .book-action-content {
            background: white;
            border-radius: 20px;
            padding: 25px;
            width: 90%;
            max-width: 350px;
            text-align: center;
        }
        
        .action-buttons-full {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 20px;
        }
        
        .action-btn {
            padding: 12px;
            border-radius: 15px;
            border: none;
            font-size: 1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.2s ease;
        }
        
        .edit-action {
            background: var(--secondary);
            color: var(--dark);
        }
        
        .delete-action {
            background: var(--error);
            color: white;
        }
        
        .cancel-action {
            background: #eee;
            color: #555;
        }
        
        /* 学习完成弹窗样式 */
        .completion-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 3000;
            justify-content: center;
            align-items: center;
        }
        
        .completion-content {
            background: white;
            border-radius: 25px;
            padding: 25px;
            width: 90%;
            max-width: 500px;
            text-align: center;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
        }
        
        .completion-title {
            font-size: 1.8rem;
            color: var(--primary);
            margin-bottom: 15px;
        }
        
        .completion-message {
            font-size: 1.2rem;
            margin-bottom: 25px;
            color: var(--dark);
            line-height: 1.5;
        }
        
        .completion-book-name {
            font-weight: bold;
            color: var(--accent);
            font-size: 1.3rem;
        }
        
        .completion-stats {
            background: var(--light);
            border-radius: 15px;
            padding: 15px;
            margin: 20px 0;
            font-size: 1.1rem;
        }
        
        .completion-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        
        .completion-btn {
            padding: 12px 20px;
            border-radius: 50px;
            border: none;
            font-size: 1.1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .completion-restart {
            background: var(--primary);
            color: white;
        }
        
        .completion-home {
            background: var(--secondary);
            color: white;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen flex flex-col">
    <div class="egg-character egg-1"></div>
    <div class="egg-character egg-2"></div>
    <div class="mobile-keyboard-adjust"></div>
    
    <!-- 操作成功提示 -->
    <div class="toast" id="toast"></div>

    <div class="container">
        <header>
            <div class="logo">叶姥姥背单词</div>
            <div class="subtitle">让学习单词变得有趣又高效！</div>
            
            <!-- 消息通知按钮 -->
            <div class="notification-btn" id="notificationBtn">
                <i class="fa fa-bell"></i>
                <span class="notification-badge" id="notificationBadge">3</span>
            </div>
            
            <div class="nav-buttons">
                <button class="btn" id="homeBtn"><i class="fa fa-home"></i> 首页</button>
                <button class="btn btn-secondary" id="spellingBtn"><i class="fa fa-pencil"></i> 拼写</button>
                <button class="btn btn-secondary" id="wordToMeaningBtn"><i class="fa fa-check-circle"></i> 选意思</button>
                <button class="btn btn-secondary" id="meaningToWordBtn"><i class="fa fa-language"></i> 选单词</button>
                <button class="btn btn-accent" id="libraryBtn"><i class="fa fa-book"></i> 单词库</button>
            </div>
        </header>

        <!-- 首页内容 -->
        <section id="homeSection" class="content-section active-section">
            <h2>选择单词本开始学习</h2>
            
            <div class="wordbook-container" id="wordbookContainer">
                <!-- 单词本将通过JS动态添加 -->
            </div>
        </section>

        <!-- 学习页面 -->
        <section id="learningSection" class="content-section">
            <div class="learning-container">
                <div class="learning-header">
                    <h2 id="learningTitle">单词学习</h2>
                    
                    <div class="mode-selector">
                        <div class="mode-btn active" data-mode="spelling">拼写练习</div>
                        <div class="mode-btn" data-mode="wordToMeaning">看单词选意思</div>
                        <div class="mode-btn" data-mode="meaningToWord">看中文选单词</div>
                    </div>
                    
                    <div class="action-buttons">
                        <button class="btn btn-accent btn-small" id="changeBookBtn"><i class="fa fa-refresh"></i> 更换单词本</button>
                        <button class="btn btn-small" id="backToHomeBtn"><i class="fa fa-arrow-left"></i> 返回首页</button>
                    </div>
                </div>
                
                <div class="progress-container">
                    <div class="progress-header">
                        <div class="progress-info">
                            <span>学习进度: </span>
                            <span id="progressText">0/0</span>
                        </div>
                        <button class="restart-btn" id="restartBtn">
                            <i class="fa fa-repeat"></i> 重学
                        </button>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                    </div>
                    
                    <!-- 进度鼓励文字 -->
                    <div class="progress-message" id="progressMessage">
                        开始学习吧！
                    </div>
                </div>
                
                <div class="question-card" id="questionCard">
                    <div id="questionContent">
                        <div class="meaning">请选择一个单词本开始学习</div>
                    </div>
                </div>
                
                <div style="text-align: center;">
                    <button class="btn" id="nextBtn" style="display: none;"><i class="fa fa-arrow-right"></i> 下一个</button>
                </div>
            </div>
        </section>

        <!-- 单词库页面 -->
        <section id="librarySection" class="content-section">
            <h2>单词库管理</h2>
            
            <!-- 搜索框 -->
            <div class="search-container">
                <input type="text" class="search-input" id="wordSearchInput" placeholder="搜索单词或中文意思...">
            </div>
            
            <div class="word-library" id="wordLibrary">
                <!-- 单词将通过JS动态添加 -->
            </div>
            
            <div class="import-section">
                <h3>批量导入单词</h3>
                <p>每行输入一个单词，格式为：单词 词性.中文意思（不同词性多个意思的单词可以分成几个单词导入）</p>
                <textarea id="importTextarea" placeholder="例如：
apple n.苹果
banana n.香蕉
father n.父亲
mother n.母亲"></textarea>
                
                <div class="example">
                    <strong>示例格式：</strong><br>
                    apple n.苹果<br>
                    run v.跑<br>
                    happy adj.高兴的
                </div>
                
                <div class="action-buttons">
                    <button class="btn" id="importBtn"><i class="fa fa-upload"></i> 导入单词</button>
                    <button class="btn btn-accent" id="exportBtn"><i class="fa fa-download"></i> 导出单词</button>
                </div>
            </div>
            
            <!-- 新增批量导入单词本区域 -->
            <div class="import-section" style="margin-top: 30px;">
                <h3>批量导入单词本</h3>
                <p>每个单词本以 "=== 单词本名 ===" 开始，后面跟着该单词本的单词（格式同上），不同单词本之间用空行分隔</p>
                <textarea id="batchImportTextarea" placeholder="例如：
=== 水果单词 ===
apple n.苹果
banana n.香蕉
orange n.橙子

=== 家庭成员 ===
father n.父亲
mother n.母亲
sister n.姐妹
brother n.兄弟"></textarea>
                
                <div class="example">
                    <strong>示例格式：</strong><br>
                    === 单词本1名称 ===<br>
                    word1 pos.意思1<br>
                    word2 pos.意思2<br>
                    <br>
                    === 单词本2名称 ===<br>
                    word3 pos.意思3<br>
                    word4 pos.意思4
                </div>
                
                <div class="action-buttons">
                    <button class="btn" id="batchImportBtn"><i class="fa fa-file-text-o"></i> 批量导入单词本</button>
                </div>
            </div>
        </section>
    </div>

    <!-- 创建单词本弹窗 -->
    <div class="modal" id="createModal">
        <div class="modal-content">
            <span class="close-btn" id="closeModalBtn">&times;</span>
            <h3 class="modal-title">创建新单词本</h3>
            
            <div class="form-group">
                <label for="bookName">单词本名称</label>
                <input type="text" id="bookName" class="form-control" placeholder="例如：我的单词本">
            </div>
            
            <div class="form-group">
                <label for="bookDescription">描述</label>
                <input type="text" id="bookDescription" class="form-control" placeholder="简单描述这个单词本">
            </div>
            
            <div class="form-group">
                <label for="bookWords">单词列表（每行一个单词，格式：单词 词性.中文意思）</label>
                <textarea id="bookWords" class="form-control" rows="5" placeholder="例如：
apple n.苹果
banana n.香蕉"></textarea>
            </div>
            
            <div class="action-buttons">
                <button class="btn" id="saveBookBtn">保存单词本</button>
                <button class="btn btn-accent" id="cancelBookBtn">取消</button>
            </div>
        </div>
    </div>

    <!-- 编辑单词本弹窗 -->
    <div class="modal" id="editModal">
        <div class="modal-content">
            <span class="close-btn" id="closeEditModalBtn">&times;</span>
            <h3 class="modal-title">编辑单词本</h3>
            
            <input type="hidden" id="editBookId">
            
            <div class="form-group">
                <label for="editBookName">单词本名称</label>
                <input type="text" id="editBookName" class="form-control" placeholder="例如：我的单词本">
            </div>
            
            <div class="form-group">
                <label for="editBookDescription">描述</label>
                <input type="text" id="editBookDescription" class="form-control" placeholder="简单描述这个单词本">
            </div>
            
            <div class="form-group">
                <label>单词列表</label>
                <div class="word-edit-list" id="wordEditList">
                    <!-- 单词编辑项将通过JS动态添加 -->
                </div>
                
                <button class="btn btn-small add-word-btn" id="addWordBtn">
                    <i class="fa fa-plus"></i> 添加单词
                </button>
            </div>
            
            <div class="action-buttons">
                <button class="btn" id="saveEditBookBtn">保存修改</button>
                <button class="btn btn-accent" id="cancelEditBookBtn">取消</button>
            </div>
        </div>
    </div>

    <!-- 消息通知弹窗 -->
    <div class="modal" id="notificationModal">
        <div class="modal-content">
            <span class="close-btn" id="closeNotificationBtn">&times;</span>
            <h3 class="modal-title">消息通知</h3>
            
            <div class="notifications-container" id="notificationsContainer">
                <!-- 通知内容 -->
                <div class="notification-card">
                    <div class="notification-title">新功能上线</div>
                    <div class="notification-message">自创单词本功能已经上线，现在你可以自己创建单词本了！</div>
                    <div class="notification-time">2025-8-5</div>
                </div>
                
                <div class="notification-card">
                    <div class="notification-title">用法提醒</div>
                    <div class="notification-message">如果你在拼写时，实在想不起来怎么拼，可以点开“看单词选意思哦”，和拼写进度是一致的！</div>
                    <div class="notification-time">2025-8-5</div>
                </div>
                
                <div class="notification-card">
                    <div class="notification-title">单词本更新</div>
                    <div class="notification-message">「日常用语」单词本已更新，新增了13个实用表达，快去学习吧！</div>
                    <div class="notification-time">2025-8-5</div>
                </div>
            </div>
        </div>
    </div>

    <!-- 删除确认弹窗 -->
    <div class="confirm-modal" id="deleteConfirmModal">
        <div class="confirm-content">
            <h3 class="confirm-title">确认删除</h3>
            <p class="confirm-message" id="deleteConfirmMessage">你确定要删除这个单词本吗？此操作无法撤销。</p>
            <input type="hidden" id="deleteBookId">
            <div class="action-buttons">
                <button class="btn btn-accent" id="cancelDeleteBtn">取消</button>
                <button class="btn" id="confirmDeleteBtn">确认删除</button>
            </div>
        </div>
    </div>

    <!-- 单词本操作弹窗 -->
    <div class="book-action-modal" id="bookActionModal">
        <div class="book-action-content">
            <h3 class="confirm-title">单词本操作</h3>
            <p id="bookActionName">操作单词本</p>
            <input type="hidden" id="currentBookId">
            
            <div class="action-buttons-full">
                <button class="action-btn edit-action" id="bookActionEdit">
                    <i class="fa fa-edit"></i> 编辑单词本
                </button>
                <button class="action-btn delete-action" id="bookActionDelete">
                    <i class="fa fa-trash"></i> 删除单词本
                </button>
                <button class="action-btn cancel-action" id="bookActionCancel">
                    <i class="fa fa-times"></i> 取消
                </button>
            </div>
        </div>
    </div>
    
    <!-- 学习完成弹窗 -->
    <div class="completion-modal" id="completionModal">
        <div class="completion-content">
            <h3 class="completion-title">恭喜完成！</h3>
            <p class="completion-message">
                你已经完成了单词本 <span class="completion-book-name" id="completedBookName"></span> 的学习！
            </p>
            
            <div class="completion-stats">
                <p>学习模式: <span id="completedMode"></span></p>
                <p>学习单词数: <span id="completedWordCount"></span> 个</p>
            </div>
            
            <div class="completion-buttons">
                <button class="completion-btn completion-restart" id="completionRestartBtn">
                    <i class="fa fa-repeat"></i> 再学一遍
                </button>
                <button class="completion-btn completion-home" id="completionHomeBtn">
                    <i class="fa fa-home"></i> 返回首页
                </button>
            </div>
        </div>
    </div>

    <!-- 底部导航栏 -->
    <nav class="bg-white nav-shadow py-2 px-4 fixed bottom-0 left-0 right-0 z-10">
        <div class="flex justify-around">
            <a href="index.html" class="flex flex-col items-center py-1 text-gray-500 hover:text-primary transition-colors">
                <i class="fa fa-home text-xl"></i>
                <span class="text-xs mt-1">首页</span>
            </a>
            <a href="quadrant.html" class="flex flex-col items-center py-1 text-gray-500 hover:text-primary transition-colors">
                <i class="fa fa-th text-xl"></i>
                <span class="text-xs mt-1">四象限</span>
            </a>
            <a href="todo.html" class="flex flex-col items-center py-1 text-gray-500 hover:text-primary transition-colors">
                <i class="fa fa-check-square-o text-xl"></i>
                <span class="text-xs mt-1">待办</span>
            </a>
            <a href="more.html" class="flex flex-col items-center py-1 text-gray-500 hover:text-primary transition-colors">
                <i class="fa fa-ellipsis-h text-xl"></i>
                <span class="text-xs mt-1">更多</span>
            </a>
            <a href="guide.html" class="flex flex-col items-center py-1 text-gray-500 hover:text-primary transition-colors">
                <i class="fa fa-question-circle text-xl"></i>
                <span class="text-xs mt-1">使用指引</span>
            </a>
        </div>
    </nav>
    
    <script>
        // 确保内容不会被底部导航遮挡
        document.addEventListener('DOMContentLoaded', function() {
            const mainContent = document.querySelector('main');
            const navHeight = document.querySelector('nav').offsetHeight;
            if (mainContent) {
                mainContent.style.paddingBottom = `${navHeight + 20}px`;
            }
        });

        // 预设单词本数据
        const defaultWordbooks = {
            fruit: {
                name: "水果单词本",
                description: "学习各种水果的英文单词",
                words: [
                    { word: "apple", pos: "n.", meaning: "苹果" },
                    { word: "banana", pos: "n.", meaning: "香蕉" },
                    { word: "orange", pos: "n.", meaning: "橙子" },
                    { word: "grape", pos: "n.", meaning: "葡萄" },
                    { word: "watermelon", pos: "n.", meaning: "西瓜" },
                    { word: "strawberry", pos: "n.", meaning: "草莓" },
                    { word: "pineapple", pos: "n.", meaning: "菠萝" },
                    { word: "mango", pos: "n.", meaning: "芒果" },
                    { word: "pear", pos: "n.", meaning: "梨" },
                    { word: "peach", pos: "n.", meaning: "桃子" }
                ]
            },
            family: {
                name: "家庭成员",
                description: "家庭成员的英文表达",
                words: [
                    { word: "father", pos: "n.", meaning: "父亲" },
                    { word: "mother", pos: "n.", meaning: "母亲" },
                    { word: "brother", pos: "n.", meaning: "兄弟" },
                    { word: "sister", pos: "n.", meaning: "姐妹" },
                    { word: "grandfather", pos: "n.", meaning: "祖父" },
                    { word: "grandmother", pos: "n.", meaning: "祖母" },
                    { word: "uncle", pos: "n.", meaning: "叔叔" },
                    { word: "aunt", pos: "n.", meaning: "阿姨" },
                    { word: "cousin", pos: "n.", meaning: "堂兄弟姐妹" },
                    { word: "son", pos: "n.", meaning: "儿子" },
                    { word: "daughter", pos: "n.", meaning: "女儿" }
                ]
            },
            animals: {
                name: "动物词汇",
                description: "各种动物的英文名称",
                words: [
                    { word: "dog", pos: "n.", meaning: "狗" },
                    { word: "cat", pos: "n.", meaning: "猫" },
                    { word: "elephant", pos: "n.", meaning: "大象" },
                    { word: "tiger", pos: "n.", meaning: "老虎" },
                    { word: "lion", pos: "n.", meaning: "狮子" },
                    { word: "monkey", pos: "n.", meaning: "猴子" },
                    { word: "panda", pos: "n.", meaning: "熊猫" },
                    { word: "giraffe", pos: "n.", meaning: "长颈鹿" },
                    { word: "rabbit", pos: "n.", meaning: "兔子" },
                    { word: "bird", pos: "n.", meaning: "鸟" },
                    { word: "fish", pos: "n.", meaning: "鱼" },
                    { word: "bear", pos: "n.", meaning: "熊" },
                    { word: "snake", pos: "n.", meaning: "蛇" },
                    { word: "zebra", pos: "n.", meaning: "斑马" }
                ]
            },
            food: {
                name: "食物词汇",
                description: "各种食物的英文表达",
                words: [
                    { word: "rice", pos: "n.", meaning: "米饭" },
                    { word: "bread", pos: "n.", meaning: "面包" },
                    { word: "meat", pos: "n.", meaning: "肉" },
                    { word: "fish", pos: "n.", meaning: "鱼" },
                    { word: "chicken", pos: "n.", meaning: "鸡肉" },
                    { word: "beef", pos: "n.", meaning: "牛肉" },
                    { word: "pork", pos: "n.", meaning: "猪肉" },
                    { word: "vegetable", pos: "n.", meaning: "蔬菜" },
                    { word: "potato", pos: "n.", meaning: "土豆" },
                    { word: "tomato", pos: "n.", meaning: "西红柿" },
                    { word: "carrot", pos: "n.", meaning: "胡萝卜" },
                    { word: "egg", pos: "n.", meaning: "鸡蛋" },
                    { word: "milk", pos: "n.", meaning: "牛奶" },
                    { word: "water", pos: "n.", meaning: "水" },
                    { word: "juice", pos: "n.", meaning: "果汁" }
                ]
            },
            daily: {
                name: "日常用语",
                description: "日常生活中常用的词汇",
                words: [
                    { word: "hello", pos: "int.", meaning: "你好" },
                    { word: "goodbye", pos: "int.", meaning: "再见" },
                    { word: "thank", pos: "v.", meaning: "感谢" },
                    { word: "please", pos: "adv.", meaning: "请" },
                    { word: "sorry", pos: "adj.", meaning: "对不起" },
                    { word: "yes", pos: "adv.", meaning: "是" },
                    { word: "no", pos: "adv.", meaning: "不" },
                    { word: "okay", pos: "adj.", meaning: "好的" },
                    { word: "hi", pos: "int.", meaning: "嗨" },
                    { word: "bye", pos: "int.", meaning: "再见" },
                    { word: "excuse", pos: "v.", meaning: "原谅" },
                    { word: "pardon", pos: "int.", meaning: "请再说一遍" },
                    { word: "welcome", pos: "adj.", meaning: "欢迎" }
                ]
            },
            colors: {
                name: "颜色词汇",
                description: "各种颜色的英文表达",
                words: [
                    { word: "red", pos: "adj.", meaning: "红色" },
                    { word: "blue", pos: "adj.", meaning: "蓝色" },
                    { word: "green", pos: "adj.", meaning: "绿色" },
                    { word: "yellow", pos: "adj.", meaning: "黄色" },
                    { word: "black", pos: "adj.", meaning: "黑色" },
                    { word: "white", pos: "adj.", meaning: "白色" },
                    { word: "purple", pos: "adj.", meaning: "紫色" },
                    { word: "orange", pos: "adj.", meaning: "橙色" },
                    { word: "pink", pos: "adj.", meaning: "粉色" },
                    { word: "brown", pos: "adj.", meaning: "棕色" },
                    { word: "gray", pos: "adj.", meaning: "灰色" },
                    { word: "gold", pos: "adj.", meaning: "金色" },
                    { word: "silver", pos: "adj.", meaning: "银色" }
                ]
            }
        };

        // 从localStorage加载数据或使用默认数据
        let wordbooks = JSON.parse(localStorage.getItem('vocabularyWordbooks')) || { ...defaultWordbooks };
        
        // 保存数据到localStorage
        function saveDataToLocalStorage() {
            localStorage.setItem('vocabularyWordbooks', JSON.stringify(wordbooks));
        }

        // 应用状态
        let currentBook = null;
        let currentMode = "spelling";
        let currentWordIndex = 0;
        let completedBooks = JSON.parse(localStorage.getItem('completedBooks')) || {};
        
        // 初始化页面
        document.addEventListener('DOMContentLoaded', function() {
            initWordbooks();
            initWordLibrary();
            bindEvents();
        });
        
        // 初始化单词本
        function initWordbooks() {
            const container = document.getElementById('wordbookContainer');
            container.innerHTML = '';
            
            // 添加单词本
            for (const bookId in wordbooks) {
                const book = wordbooks[bookId];
                const card = createBookCard(bookId, book.name, book.description, book.words.length);
                container.appendChild(card);
            }
            
            // 添加创建按钮
            const createBtn = document.createElement('div');
            createBtn.className = 'wordbook-card';
            createBtn.id = 'createBookBtn';
            createBtn.innerHTML = `
                <h3><i class="fa fa-plus-circle"></i> 创建新单词本</h3>
                <p>添加你自己的单词集合</p>
            `;
            container.appendChild(createBtn);
            
            // 添加创建事件
            createBtn.addEventListener('click', function() {
                document.getElementById('createModal').style.display = 'flex';
            });
        }
        
        // 创建单词本卡片
        function createBookCard(bookId, name, description, wordCount) {
            const card = document.createElement('div');
            card.className = 'wordbook-card';
            if (bookId.startsWith('custom')) {
                card.classList.add('custom-book');
            }
            card.setAttribute('data-book', bookId);
            
            // 添加明显可见的横向三个点操作按钮
            card.innerHTML = `
                <div class="book-options" data-book="${bookId}">
                    <i class="fa fa-ellipsis-h"></i>
                </div>
                <div class="word-count">${wordCount}</div>
                <h3>${name}</h3>
                <p>${description}</p>
            `;
            
            // 单词本点击事件 - 开始学习
            card.addEventListener('click', function(e) {
                // 如果点击的是操作按钮，则不触发学习
                if (!e.target.closest('.book-options')) {
                    currentBook = bookId;
                    currentWordIndex = 0;
                    loadCurrentWord();
                    showLearningSection();
                }
            });
            
            return card;
        }
        
        function bindEvents() {
            // 页面切换功能
            document.getElementById('homeBtn').addEventListener('click', () => showSection('homeSection'));
            document.getElementById('spellingBtn').addEventListener('click', () => {
                currentMode = "spelling";
                showLearningSection();
            });
            document.getElementById('wordToMeaningBtn').addEventListener('click', () => {
                currentMode = "wordToMeaning";
                showLearningSection();
            });
            document.getElementById('meaningToWordBtn').addEventListener('click', () => {
                currentMode = "meaningToWord";
                showLearningSection();
            });
            document.getElementById('libraryBtn').addEventListener('click', () => showSection('librarySection'));
            document.getElementById('backToHomeBtn').addEventListener('click', () => showSection('homeSection'));
            
            // 创建单词本
            document.getElementById('closeModalBtn').addEventListener('click', function() {
                document.getElementById('createModal').style.display = 'none';
            });

            document.getElementById('cancelBookBtn').addEventListener('click', function() {
                document.getElementById('createModal').style.display = 'none';
            });

            document.getElementById('saveBookBtn').addEventListener('click', saveCustomBook);
            
            // 编辑单词本
            document.getElementById('closeEditModalBtn').addEventListener('click', function() {
                document.getElementById('editModal').style.display = 'none';
            });

            document.getElementById('cancelEditBookBtn').addEventListener('click', function() {
                document.getElementById('editModal').style.display = 'none';
            });

            document.getElementById('saveEditBookBtn').addEventListener('click', saveEditedBook);
            
            // 添加新单词到单词本
            document.getElementById('addWordBtn').addEventListener('click', addNewWordToEditList);
            
            // 下一个单词
            document.getElementById('nextBtn').addEventListener('click', goToNextWord);
            
            // 更换单词本
            document.getElementById('changeBookBtn').addEventListener('click', function() {
                showSection('homeSection');
            });
            
            // 学习模式切换
            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    currentMode = this.dataset.mode;
                    updateModeButtons();
                    loadCurrentWord();
                });
            });
            
            // 单词导入
            document.getElementById('importBtn').addEventListener('click', function() {
                const text = document.getElementById('importTextarea').value;
                if (!text.trim()) {
                    alert('请输入要导入的单词');
                    return;
                }
                
                // 创建一个"导入的单词"单词本
                let bookId = 'custom_imported_' + Date.now();
                
                // 解析单词
                const words = [];
                const lines = text.split('\n');
                for (let line of lines) {
                    line = line.trim();
                    if (!line) continue;
                    
                    // 尝试解析每一行：单词 词性.中文意思
                    const parts = line.split(/\s+/);
                    if (parts.length < 2) {
                        alert(`格式错误: "${line}"，请使用正确格式：单词 词性.中文意思`);
                        return;
                    }
                    
                    const word = parts[0];
                    const rest = parts.slice(1).join(' ');
                    const posMatch = rest.match(/^([a-zA-Z]+\.)/);
                    if (!posMatch) {
                        alert(`格式错误: "${line}"，词性部分必须以英文句点结尾，如"n.苹果"`);
                        return;
                    }
                    
                    const pos = posMatch[0];
                    const meaning = rest.slice(pos.length).trim();
                    
                    words.push({ word, pos, meaning });
                }
                
                // 添加到单词本
                wordbooks[bookId] = {
                    name: "导入的单词",
                    description: `包含 ${words.length} 个单词`,
                    words: words
                };
                
                // 保存到本地存储
                saveDataToLocalStorage();
                
                // 刷新单词本和单词库
                initWordbooks();
                initWordLibrary();
                
                showToast('单词导入成功！');
                document.getElementById('importTextarea').value = '';
            });
            
            // 单词导出
            document.getElementById('exportBtn').addEventListener('click', function() {
                const words = Array.from(document.querySelectorAll('.word-item')).map(item => {
                    return `${item.querySelector('.word-text').textContent} ${item.querySelector('.word-meaning').textContent}`;
                }).join('\n');
                
                navigator.clipboard.writeText(words).then(() => {
                    showToast('单词已复制到剪贴板！');
                }).catch(err => {
                    showToast('复制失败，请手动选择并复制！');
                });
            });
            
            // 新增批量导入单词本功能
            document.getElementById('batchImportBtn').addEventListener('click', function() {
                const text = document.getElementById('batchImportTextarea').value;
                if (!text.trim()) {
                    alert('请输入要导入的单词本内容');
                    return;
                }
                
                try {
                    // 按空行分割单词本
                    const bookBlocks = text.split(/\n\s*\n/);
                    let importedCount = 0;
                    
                    for (const block of bookBlocks) {
                        if (!block.trim()) continue;
                        
                        // 分割单词本名称和单词内容
                        const lines = block.split('\n').filter(line => line.trim());
                        if (lines.length === 0) continue;
                        
                        // 检查第一行是否为单词本名（以===开头和结尾）
                        const firstLine = lines[0].trim();
                        if (!firstLine.startsWith('===') || !firstLine.endsWith('===')) {
                            alert(`格式错误：单词本应以"=== 单词本名 ==="开始，错误行：${firstLine}`);
                            return;
                        }
                        
                        // 提取单词本名称
                        const bookName = firstLine.substring(3, firstLine.length - 3).trim();
                        if (!bookName) {
                            alert('单词本名称不能为空');
                            return;
                        }
                        
                        // 创建唯一的单词本ID
                        let bookId = 'custom_batch_imported_' + Date.now() + '_' + Math.floor(Math.random() * 1000);
                        
                        // 解析单词
                        const words = [];
                        const wordLines = lines.slice(1); // 跳过第一行（单词本名称）
                        
                        for (let line of wordLines) {
                            line = line.trim();
                            if (!line) continue;
                            
                            // 新的解析逻辑：匹配直到词性前的所有内容作为单词
                            const posMatch = line.match(/\s+([a-zA-Z]+\.)/);
                            if (!posMatch) {
                                alert(`格式错误: "${line}"，请使用正确格式：单词 词性.中文意思`);
                                return;
                            }
                            
                            const word = line.substring(0, posMatch.index).trim();
                            const pos = posMatch[1];
                            const meaning = line.substring(posMatch.index + posMatch[0].length).trim();
                            
                            words.push({ word, pos, meaning });
                        }
                        
                        if (words.length === 0) {
                            continue; // 跳过没有单词的单词本
                        }
                        
                        // 添加到单词本
                        wordbooks[bookId] = {
                            name: bookName,
                            description: `包含 ${words.length} 个单词`,
                            words: words
                        };
                        
                        importedCount++;
                    }
                    
                    if (importedCount === 0) {
                        alert('没有成功导入任何单词本，请检查格式');
                        return;
                    }
                    
                    // 保存到本地存储
                    saveDataToLocalStorage();
                    
                    // 刷新单词本和单词库
                    initWordbooks();
                    initWordLibrary();
                    
                    showToast(`成功导入 ${importedCount} 个单词本！`);
                    document.getElementById('batchImportTextarea').value = '';
                } catch (error) {
                    alert('导入过程中出现错误：' + error.message);
                }
            });
            
            // 消息通知
            document.getElementById('notificationBtn').addEventListener('click', function() {
                document.getElementById('notificationModal').style.display = 'flex';
            });
            
            document.getElementById('closeNotificationBtn').addEventListener('click', function() {
                document.getElementById('notificationModal').style.display = 'none';
            });
            
            // 单词搜索功能
            document.getElementById('wordSearchInput').addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase().trim();
                filterWords(searchTerm);
            });
            
            // 删除确认弹窗事件
            document.getElementById('cancelDeleteBtn').addEventListener('click', function() {
                document.getElementById('deleteConfirmModal').style.display = 'none';
            });
            
            document.getElementById('confirmDeleteBtn').addEventListener('click', function() {
                const bookId = document.getElementById('deleteBookId').value;
                confirmBookDeletion(bookId);
                document.getElementById('deleteConfirmModal').style.display = 'none';
            });
            
            // 单词本操作弹窗事件
            document.getElementById('bookActionCancel').addEventListener('click', function() {
                document.getElementById('bookActionModal').style.display = 'none';
            });
            
            document.getElementById('bookActionEdit').addEventListener('click', function() {
                const bookId = document.getElementById('currentBookId').value;
                
                // 检查是否是预设单词本
                if (!bookId.startsWith('custom')) {
                    alert('预设单词本不能编辑');
                    document.getElementById('bookActionModal').style.display = 'none';
                    return;
                }
                
                openEditBookModal(bookId);
                document.getElementById('bookActionModal').style.display = 'none';
            });
            
            document.getElementById('bookActionDelete').addEventListener('click', function() {
                const bookId = document.getElementById('currentBookId').value;
                
                // 检查是否是预设单词本
                if (!bookId.startsWith('custom')) {
                    alert('预设单词本不能删除');
                    document.getElementById('bookActionModal').style.display = 'none';
                    return;
                }
                
                // 显示删除确认弹窗
                document.getElementById('deleteBookId').value = bookId;
                document.getElementById('deleteConfirmMessage').textContent = 
                    `你确定要删除单词本"${wordbooks[bookId].name}"吗？此操作无法撤销。`;
                document.getElementById('deleteConfirmModal').style.display = 'flex';
                document.getElementById('bookActionModal').style.display = 'none';
            });
            
            // 单词本操作按钮点击事件
            document.addEventListener('click', function(e) {
                // 点击三个点显示操作弹窗
                if (e.target.closest('.book-options')) {
                    const bookOptions = e.target.closest('.book-options');
                    const bookId = bookOptions.dataset.book;
                    const book = wordbooks[bookId];
                    
                    if (book) {
                        // 填充操作弹窗信息
                        document.getElementById('currentBookId').value = bookId;
                        document.getElementById('bookActionName').textContent = `操作: ${book.name}`;
                        
                        // 显示操作弹窗
                        document.getElementById('bookActionModal').style.display = 'flex';
                    }
                    
                    e.stopPropagation();
                }
                
                // 删除单词编辑项
                if (e.target.closest('.delete-word-btn')) {
                    const item = e.target.closest('.word-edit-item');
                    if (document.querySelectorAll('.word-edit-item').length > 1) {
                        item.remove();
                    } else {
                        alert('至少保留一个单词');
                    }
                    e.stopPropagation();
                }
            });
            
            // 重学按钮事件
            document.getElementById('restartBtn').addEventListener('click', function() {
                if (currentBook) {
                    currentWordIndex = 0;
                    loadCurrentWord();
                    showToast('已重置学习进度！');
                }
            });
            
            // 学习完成弹窗事件
            document.getElementById('completionRestartBtn').addEventListener('click', function() {
                currentWordIndex = 0;
                loadCurrentWord();
                document.getElementById('completionModal').style.display = 'none';
            });
            
            document.getElementById('completionHomeBtn').addEventListener('click', function() {
                showSection('homeSection');
                document.getElementById('completionModal').style.display = 'none';
            });
        }
        
        // 检查单词本名称是否已存在
        function isBookNameExists(name, excludeId = null) {
            for (const bookId in wordbooks) {
                // 排除当前编辑的单词本
                if (bookId === excludeId) continue;
                
                // 检查名称是否相同（不区分大小写）
                if (wordbooks[bookId].name.toLowerCase() === name.toLowerCase()) {
                    return true;
                }
            }
            return false;
        }
        
        // 确认删除单词本
        function confirmBookDeletion(bookId) {
            // 从数据中删除
            delete wordbooks[bookId];
            
            // 保存到本地存储
            saveDataToLocalStorage();
            
            // 如果当前正在学习的是这个单词本，回到首页
            if (currentBook === bookId) {
                currentBook = null;
                showSection('homeSection');
            }
            
            // 重新初始化单词本显示
            initWordbooks();
            
            // 显示删除成功提示
            showToast('单词本已删除');
        }
        
        // 显示提示消息
        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 2000);
        }
        
        // 打开编辑单词本弹窗
        function openEditBookModal(bookId) {
            const book = wordbooks[bookId];
            if (!book) return;
            
            // 填充表单
            document.getElementById('editBookId').value = bookId;
            document.getElementById('editBookName').value = book.name;
            document.getElementById('editBookDescription').value = book.description;
            
            // 填充单词列表
            const wordListContainer = document.getElementById('wordEditList');
            wordListContainer.innerHTML = '';
            
            book.words.forEach((word, index) => {
                addWordEditItem(word.word, word.pos, word.meaning);
            });
            
            // 显示弹窗
            document.getElementById('editModal').style.display = 'flex';
        }
        
        // 添加单词编辑项
        function addWordEditItem(word = '', pos = 'n.', meaning = '') {
            const wordListContainer = document.getElementById('wordEditList');
            
            const item = document.createElement('div');
            item.className = 'word-edit-item';
            item.innerHTML = `
                <input type="text" class="form-control word-input" placeholder="单词" value="${word}">
                <input type="text" class="form-control pos-input" placeholder="词性" value="${pos}">
                <input type="text" class="form-control meaning-input" placeholder="中文意思" value="${meaning}">
                <div class="delete-word-btn">
                    <i class="fa fa-times"></i>
                </div>
            `;
            
            wordListContainer.appendChild(item);
        }
        
        // 添加新单词到编辑列表
        function addNewWordToEditList() {
            addWordEditItem();
            // 滚动到底部
            const listContainer = document.getElementById('wordEditList');
            listContainer.scrollTop = listContainer.scrollHeight;
        }
        
        // 保存编辑后的单词本
        function saveEditedBook() {
            const bookId = document.getElementById('editBookId').value;
            const name = document.getElementById('editBookName').value.trim();
            const description = document.getElementById('editBookDescription').value.trim();
            
            if (!name) {
                alert('请输入单词本名称');
                return;
            }
            
            // 检查名称是否已存在
            if (isBookNameExists(name, bookId)) {
                alert('已存在同名的单词本，请使用其他名称');
                return;
            }
            
            // 收集单词数据
            const wordItems = document.querySelectorAll('.word-edit-item');
            const words = [];
            
            for (let item of wordItems) {
                const word = item.querySelector('.word-input').value.trim();
                const pos = item.querySelector('.pos-input').value.trim();
                const meaning = item.querySelector('.meaning-input').value.trim();
                
                if (!word || !meaning) {
                    alert('单词和中文意思不能为空');
                    return;
                }
                
                words.push({ word, pos, meaning });
            }
            
            // 更新单词本数据
            wordbooks[bookId] = {
                name: name,
                description: description,
                words: words
            };
            
            // 保存到本地存储
            saveDataToLocalStorage();
            
            // 重新初始化单词本显示
            initWordbooks();
            initWordLibrary();
            
            // 关闭弹窗
            document.getElementById('editModal').style.display = 'none';
            
            // 显示保存成功提示
            showToast('已保存');
        }
        
        // 过滤单词并高亮匹配部分
        function filterWords(searchTerm) {
            const wordItems = document.querySelectorAll('.word-item');
            
            if (!searchTerm) {
                // 如果搜索词为空，显示所有单词并移除高亮
                wordItems.forEach(item => {
                    item.style.display = 'flex';
                    // 恢复原始文本
                    const wordText = item.querySelector('.word-text');
                    const originalWord = wordText.getAttribute('data-original') || wordText.textContent;
                    wordText.textContent = originalWord;
                    
                    const meaningText = item.querySelector('.word-meaning');
                    const originalMeaning = meaningText.getAttribute('data-original') || meaningText.textContent;
                    meaningText.textContent = originalMeaning;
                });
                return;
            }
            
            // 逐个检查单词
            wordItems.forEach(item => {
                const wordElement = item.querySelector('.word-text');
                const originalWord = wordElement.getAttribute('data-original') || wordElement.textContent;
                const word = originalWord.toLowerCase();
                
                const meaningElement = item.querySelector('.word-meaning');
                const originalMeaning = meaningElement.getAttribute('data-original') || meaningElement.textContent;
                const meaning = originalMeaning.toLowerCase();
                
                // 保存原始文本用于恢复
                wordElement.setAttribute('data-original', originalWord);
                meaningElement.setAttribute('data-original', originalMeaning);
                
                // 检查单词或中文意思是否包含搜索词
                const wordMatchIndex = word.indexOf(searchTerm);
                const meaningMatchIndex = meaning.indexOf(searchTerm);
                
                if (wordMatchIndex !== -1 || meaningMatchIndex !== -1) {
                    item.style.display = 'flex';
                    
                    // 高亮单词中的匹配部分
                    if (wordMatchIndex !== -1) {
                        const highlightedWord = originalWord.substring(0, wordMatchIndex) +
                                               '<span class="highlight">' +
                                               originalWord.substring(wordMatchIndex, wordMatchIndex + searchTerm.length) +
                                               '</span>' +
                                               originalWord.substring(wordMatchIndex + searchTerm.length);
                        wordElement.innerHTML = highlightedWord;
                    } else {
                        wordElement.textContent = originalWord;
                    }
                    
                    // 高亮意思中的匹配部分
                    if (meaningMatchIndex !== -1) {
                        const highlightedMeaning = originalMeaning.substring(0, meaningMatchIndex) +
                                                  '<span class="highlight">' +
                                                  originalMeaning.substring(meaningMatchIndex, meaningMatchIndex + searchTerm.length) +
                                                  '</span>' +
                                                  originalMeaning.substring(meaningMatchIndex + searchTerm.length);
                        meaningElement.innerHTML = highlightedMeaning;
                    } else {
                        meaningElement.textContent = originalMeaning;
                    }
                } else {
                    item.style.display = 'none';
                }
            });
        }
        
        // 保存自定义单词本
        function saveCustomBook() {
            const name = document.getElementById('bookName').value.trim();
            const description = document.getElementById('bookDescription').value.trim();
            const wordsText = document.getElementById('bookWords').value.trim();
            
            if (!name) {
                alert('请输入单词本名称');
                return;
            }
            
            // 检查名称是否已存在
            if (isBookNameExists(name)) {
                alert('已存在同名的单词本，请使用其他名称');
                return;
            }
            
            if (!wordsText) {
                alert('请输入单词列表');
                return;
            }
            
            // 解析单词
            const words = [];
            const lines = wordsText.split('\n');
            for (let line of lines) {
                line = line.trim();
                if (!line) continue;
                
                // 新的解析逻辑：匹配直到词性前的所有内容作为单词
                const posMatch = line.match(/\s+([a-zA-Z]+\.)/);
                if (!posMatch) {
                    alert(`格式错误: "${line}"，请使用正确格式：单词 词性.中文意思`);
                    return;
                }
                
                const word = line.substring(0, posMatch.index).trim();
                const pos = posMatch[1];
                const meaning = line.substring(posMatch.index + posMatch[0].length).trim();
                
                words.push({ word, pos, meaning });
            }
            
            // 生成一个唯一键
            const bookId = 'custom_' + Date.now();
            
            // 添加到单词本
            wordbooks[bookId] = {
                name: name,
                description: description,
                words: words
            };
            
            // 保存到本地存储
            saveDataToLocalStorage();
            
            // 在首页添加单词本卡片
            const container = document.getElementById('wordbookContainer');
            const card = createBookCard(bookId, name, description, words.length);
            container.insertBefore(card, document.getElementById('createBookBtn'));
            
            showToast('单词本创建成功');
            document.getElementById('createModal').style.display = 'none';
            
            // 重置表单
            document.getElementById('bookName').value = '';
            document.getElementById('bookDescription').value = '';
            document.getElementById('bookWords').value = '';
        }
        
        function initWordLibrary() {
            const library = document.getElementById('wordLibrary');
            library.innerHTML = '';
            
            // 合并所有单词本中的单词
            const allWords = [];
            for (const bookId in wordbooks) {
                allWords.push(...wordbooks[bookId].words);
            }
            
            // 显示单词
            allWords.forEach(word => {
                const item = document.createElement('div');
                item.className = 'word-item';
                item.innerHTML = `
                    <div class="word-text">${word.word}</div>
                    <div class="word-meaning">${word.pos}${word.meaning}</div>
                `;
                library.appendChild(item);
            });
        }
        
        function showSection(sectionId) {
            // 隐藏所有内容区
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active-section');
            });
            
            // 显示选中的内容区
            document.getElementById(sectionId).classList.add('active-section');
            
            // 如果是学习页面，更新模式按钮
            if (sectionId === 'learningSection') {
                updateModeButtons();
            }
        }
        
        function showLearningSection() {
            if (!currentBook) {
                alert("请先选择一个单词本！");
                showSection('homeSection');
                return;
            }
            
            // 更新标题
            document.getElementById('learningTitle').textContent = 
                currentMode === "spelling" ? "单词拼写练习" : 
                currentMode === "wordToMeaning" ? "看单词选意思" : "看中文选单词";
            
            // 加载单词
            loadCurrentWord();
            
            // 显示学习区
            showSection('learningSection');
        }
        
        function updateModeButtons() {
            document.querySelectorAll('.mode-btn').forEach(btn => {
                if (btn.dataset.mode === currentMode) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });
        }

        function loadCurrentWord() {
            const questionContent = document.getElementById('questionContent');
            const nextBtn = document.getElementById('nextBtn');
            
            if (!currentBook || !wordbooks[currentBook] || wordbooks[currentBook].words.length === 0) {
                questionContent.innerHTML = `<div class="meaning">请选择一个单词本开始学习</div>`;
                nextBtn.style.display = 'none';
                return;
            }
            
            const wordData = wordbooks[currentBook].words[currentWordIndex];
            nextBtn.style.display = 'none';
            
            // 更新进度
            updateProgress();
            
            if (currentMode === "spelling") {
                // 拼写模式
                questionContent.innerHTML = `
                    <div class="meaning">${wordData.meaning}</div>
                    <div class="part-of-speech">${wordData.pos}</div>
                    <div class="input-container">
                        <input type="text" class="word-input" id="spellingInput" placeholder="请输入单词..." autocomplete="off">
                        <div class="error-message" id="errorMessage"></div>
                    </div></div>
                    <div class="feedback" id="feedback"></div>
                `;
                
                // 添加输入事件监听
                const input = document.getElementById('spellingInput');
                input.addEventListener('input', function() {
                    const inputValue = this.value.toLowerCase().trim();
                    
                    if (inputValue === wordData.word) {
                        // 拼写正确
                        document.getElementById('feedback').innerHTML = '<span class="correct-feedback">✓ 拼写正确！太棒了！</span>';
                        document.getElementById('errorMessage').textContent = '';
                        
                        // 显示下一个按钮
                        nextBtn.style.display = 'block';
                    } else if (inputValue.length >= 3 && inputValue !== wordData.word) {
                        document.getElementById('errorMessage').textContent = '拼写有误，请再试一次';
                        document.getElementById('errorMessage').style.color = 'var(--error)';
                    } else {
                        document.getElementById('feedback').innerHTML = '';
                        document.getElementById('errorMessage').textContent = '';
                    }
                });
                
                // 手机输入框优化
                input.addEventListener('focus', function() {
                    setTimeout(() => {
                        this.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        document.querySelector('.mobile-keyboard-adjust').scrollIntoView();
                    }, 300);
                });
                
                input.focus();
            } 
            else if (currentMode === "wordToMeaning") {
                // 看单词选意思模式
                const options = generateOptions(wordData, true);
                questionContent.innerHTML = `
                    <div class="word">${wordData.word}</div>
                    <div class="part-of-speech">${wordData.pos}</div>
                    <div class="options-container">
                        ${options}
                    </div>
                    <div class="feedback" id="feedback"></div>
                `;
                
                // 添加选项点击事件
                addOptionListeners(wordData, true);
            } 
            else {
                // 看中文选单词模式
                const options = generateOptions(wordData, false);
                questionContent.innerHTML = `
                    <div class="meaning">${wordData.meaning}</div>
                    <div class="part-of-speech">${wordData.pos}</div>
                    <div class="options-container">
                        ${options}
                    </div>
                    <div class="feedback" id="feedback"></div>
                `;
                
                // 添加选项点击事件
                addOptionListeners(wordData, false);
            }
        }
        
        // 生成选项
        function generateOptions(wordData, isWordToMeaning) {
            const currentBookWords = wordbooks[currentBook].words;
            let options = [];
            
            // 添加正确答案
            options.push({
                value: isWordToMeaning ? wordData.meaning : wordData.word,
                isCorrect: true
            });
            
            // 添加错误答案
            const wrongOptionCount = Math.min(3, currentBookWords.length - 1);
            let wrongOptionsAdded = 0;
            let attempts = 0;
            const maxAttempts = 100; // 防止无限循环
            
            while (wrongOptionsAdded < wrongOptionCount && attempts < maxAttempts) {
                attempts++;
                let randomIndex;
                do {
                    randomIndex = Math.floor(Math.random() * currentBookWords.length);
                } while (randomIndex === currentWordIndex);
                
                const candidateValue = isWordToMeaning ? 
                    currentBookWords[randomIndex].meaning : 
                    currentBookWords[randomIndex].word;
                
                // 检查是否已经添加过（避免重复选项）
                if (options.some(opt => opt.value === candidateValue)) continue;
                
                options.push({
                    value: candidateValue,
                    isCorrect: false
                });
                wrongOptionsAdded++;
            }
            
            // 随机排序选项
            options.sort(() => Math.random() - 0.5);
            
            // 生成HTML
            return options.map(opt => `
                <div class="option-btn" data-correct="${opt.isCorrect}">
                    ${opt.value}
                </div>
            `).join('');
        }
        
        // 添加选项监听器
        function addOptionListeners(wordData, isWordToMeaning) {
            document.querySelectorAll('.option-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const isCorrect = this.dataset.correct === "true";
                    const feedback = document.getElementById('feedback');
                    const nextBtn = document.getElementById('nextBtn');
                    
                    if (isCorrect) {
                        this.classList.add('correct');
                        feedback.innerHTML = '<span class="correct-feedback">✓ 回答正确！太棒了！</span>';
                    } else {
                        this.classList.add('incorrect');
                        feedback.innerHTML = '<span class="incorrect-feedback">✗ 回答错误，再试一次</span>';
                        
                        // 显示正确答案
                        document.querySelectorAll('.option-btn').forEach(b => {
                            if (b.dataset.correct === "true") {
                                b.classList.add('correct');
                            }
                        });
                    }
                    
                    // 禁用所有按钮
                    document.querySelectorAll('.option-btn').forEach(b => {
                        b.style.pointerEvents = 'none';
                    });
                    
                    // 显示下一个按钮
                    nextBtn.style.display = 'block';
                });
            });
        }
        
        function goToNextWord() {
            const card = document.getElementById('questionCard');
            card.classList.add('flip-out');
            
            setTimeout(() => {
                const totalWords = wordbooks[currentBook].words.length;
                const oldIndex = currentWordIndex;
                
                // 更新索引
                currentWordIndex = (currentWordIndex + 1) % totalWords;
                
                // 检查是否完成整个单词本
                if (oldIndex === totalWords - 1) {
                    showCompletionModal();
                } else {
                    loadCurrentWord();
                }
                
                card.classList.remove('flip-out');
                card.classList.add('flip-in');
                
                setTimeout(() => {
                    card.classList.remove('flip-in');
                }, 500);
            }, 500);
        }
        
        // 显示完成弹窗
        function showCompletionModal() {
            if (!currentBook) return;
            
            const book = wordbooks[currentBook];
            const totalWords = book.words.length;
            
            // 更新完成记录
            if (!completedBooks[currentBook]) {
                completedBooks[currentBook] = {};
            }
            completedBooks[currentBook][currentMode] = new Date().toISOString();
            localStorage.setItem('completedBooks', JSON.stringify(completedBooks));
            
            // 填充弹窗内容
            document.getElementById('completedBookName').textContent = book.name;
            document.getElementById('completedWordCount').textContent = totalWords;
            
            // 设置学习模式文本
            let modeText = '';
            switch(currentMode) {
                case 'spelling':
                    modeText = '拼写练习';
                    break;
                case 'wordToMeaning':
                    modeText = '看单词选意思';
                    break;
                case 'meaningToWord':
                    modeText = '看中文选单词';
                    break;
                default:
                    modeText = currentMode;
            }
            document.getElementById('completedMode').textContent = modeText;
            
            // 显示弹窗
            document.getElementById('completionModal').style.display = 'flex';
        }
        
        // 更新进度和鼓励文字
        function updateProgress() {
            if (!currentBook || !wordbooks[currentBook]) return;
            
            const totalWords = wordbooks[currentBook].words.length;
            const remainingWords = totalWords - (currentWordIndex + 1);
            const progress = ((currentWordIndex + 1) / totalWords) * 100;
            
            // 更新进度条
            document.getElementById('progressFill').style.width = `${progress}%`;
            document.getElementById('progressText').textContent = `${currentWordIndex + 1}/${totalWords}`;
            
            // 更新鼓励文字
            const progressMessage = document.getElementById('progressMessage');
            
            if (remainingWords <= 0) {
                progressMessage.textContent = "恭喜你完成了所有单词的学习！";
            } else if (remainingWords === 1) {
                progressMessage.textContent = "坚持住，还剩最后1个单词了！";
            } else if (remainingWords <= 5) {
                progressMessage.textContent = `加油，还有${remainingWords}个单词！`;
            } else if (currentWordIndex === 0) {
                progressMessage.textContent = "开始学习吧，祝你取得好成绩！";
            } else if (progress >= 50) {
                progressMessage.textContent = `已经完成一半了，继续努力！还剩${remainingWords}个单词`;
            } else {
                progressMessage.textContent = `不错哦，已经到${Math.round(progress)}%了！`;
            }
        }
    </script>
</body>
</html>
